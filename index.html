<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Memory Game</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg?v=1">
    <link rel="shortcut icon" href="favicon.svg?v=1">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- FTUE Modal -->
    <div id="ftue-modal" class="ftue-modal hidden">
        <div class="ftue-modal-overlay"></div>
        <div class="ftue-modal-content">
            <button class="ftue-modal-close" id="ftue-close-btn">Ã—</button>
            <h2 class="ftue-modal-title">How To Play</h2>
            <div class="ftue-modal-body">
                <p class="ftue-instruction">Match each color with its name to win!</p>
                <ul class="ftue-steps">
                    <li>Click on cards to flip them and reveal what's underneath</li>
                    <li>Find pairs: one card shows a color, the other shows its name</li>
                    <li>Match all pairs to complete the game!</li>
                </ul>
                <div class="ftue-example">
                    <p class="ftue-example-title">Try it yourself:</p>
                    <div class="ftue-example-cards">
                        <div class="ftue-example-card color-example" data-ftue-card="color" data-ftue-color="#FF6B6B" data-ftue-name="Coral">
                            <div class="ftue-example-card-inner">
                                <div class="ftue-example-card-back"></div>
                                <div class="ftue-example-card-front" style="background: #FF6B6B;"></div>
                            </div>
                        </div>
                        <div class="ftue-example-card name-example" data-ftue-card="name" data-ftue-color="#FF6B6B" data-ftue-name="Coral">
                            <div class="ftue-example-card-inner">
                                <div class="ftue-example-card-back"></div>
                                <div class="ftue-example-card-front">Coral</div>
                            </div>
                        </div>
                    </div>
                    <p class="ftue-example-text" id="ftue-example-text">Click the cards to flip them and find the match!</p>
                </div>
            </div>
            <button class="ftue-modal-button" id="ftue-got-it-btn" disabled>Got it!</button>
        </div>
    </div>

    <div class="container">
        <div id="game-board" class="game-board"></div>

        <div class="game-info">
            <div class="info-item">
                <span class="label">Moves:</span>
                <span id="moves">0</span>
            </div>
            <div class="info-item">
                <span class="label">Matches:</span>
                <span id="matches">0</span>
                <span class="total">/ 8</span>
            </div>
            <button id="new-game-btn" class="new-game-btn">New Game</button>
        </div>

        <div id="win-message" class="win-message hidden">
            <h2>Perfect Match!</h2>
            <p>You've successfully matched all colors</p>
            <p class="final-score">Completed in <span id="final-moves"></span> moves</p>
            <button id="play-again-btn" class="new-game-btn">Play Again</button>
        </div>
    </div>

    <script type="module" src="script-refactored.js"></script>
    <script>
        // Auto-reload on file changes
        (function() {
            let fileHashes = {
                css: null,
                js: null,
                html: null
            };
            
            async function getFileHash(url) {
                try {
                    const response = await fetch(url + '?t=' + Date.now());
                    const text = await response.text();
                    // Simple hash - just use length and first/last chars as quick check
                    return text.length + text.substring(0, 50) + text.substring(text.length - 50);
                } catch (e) {
                    return null;
                }
            }
            
            async function checkForChanges() {
                // Check CSS
                const cssHash = await getFileHash('style.css');
                if (fileHashes.css && cssHash && fileHashes.css !== cssHash) {
                    const link = document.querySelector('link[href*="style.css"]');
                    if (link) {
                        link.href = 'style.css?t=' + Date.now();
                        fileHashes.css = cssHash;
                    }
                } else if (!fileHashes.css) {
                    fileHashes.css = cssHash;
                }
                
                // Check JS - reload page if changed
                const jsHash = await getFileHash('script.js');
                if (fileHashes.js && jsHash && fileHashes.js !== jsHash) {
                    location.reload();
                } else if (!fileHashes.js) {
                    fileHashes.js = jsHash;
                }
                
                // Check HTML - reload if changed
                const htmlHash = await getFileHash('index.html');
                if (fileHashes.html && htmlHash && fileHashes.html !== htmlHash) {
                    location.reload();
                } else if (!fileHashes.html) {
                    fileHashes.html = htmlHash;
                }
            }
            
            // Check every 300ms for fast updates
            setInterval(checkForChanges, 300);
        })();
    </script>
</body>
</html>

